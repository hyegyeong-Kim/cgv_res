<script>
     $(document).ready(function () {
            // var option_visual = {
            //     slidesPerView: 1.2,
            //     autoplay: {
            //         delay: 3000,
            //     },
            //     spaceBetween:10,
            //     // loop:true,
            //     keyboard: {
            //         enabled: true,
            //     },
            //     navigation: {
            //         nextEl: '.visual .swiper-button-next',
            //         prevEl: '.visual .swiper-button-prev',
            //     },
            // };

            var option_sec01 = {
                slidesPerView: 3.1,
                spaceBetween: 5,
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                },
            };

            var option_sec02 = {
                slidesPerView: 3,
                autoplay: {
                    delay: 3000,
                },
                spaceBetween: 8,
                loop: false,
                keyboard: {
                    enabled: true,
                },
                pagination: {
                    el: '.sec07 .swiper-pagination',
                    clickable: true,
                },
                on: {
                    init: function () { },
                    slideChange: function () { },
                },
                navigation: {
                    nextEl: '.visual .swiper-button-next',
                    prevEl: '.visual .swiper-button-prev',
                },
            };
            var option_sec03 = {
                slidesPerView: 1,
                spaceBetween:5,
                keyboard: {
                    enabled: true,
                },
                navigation: {
                    nextEl: '.visual .swiper-button-next',
                    prevEl: '.visual .swiper-button-prev',
                },
            };
            var option_sec04 = {
                slidesPerView: 1.1,
                spaceBetween:5,
                keyboard: {
                    enabled: true,
                },
                navigation: {
                    nextEl: '.visual .swiper-button-next',
                    prevEl: '.visual .swiper-button-prev',
                },
            };


           
            var swiper = new Swiper('.main_visual .visual.swiper-container', option_sec01);
            var swiper = new Swiper('.now_movie .visual.swiper-container', option_sec03);
            var swiper = new Swiper('.ott .visual.swiper-container', option_sec04);

        });

</script>

<style>
    .main_visual .visual .swiper-wrapper .swiper-slide {padding:0px 3px 0 !important;}
    .main_visual .swiper-wrapper .swiper-slide::after {display:none !important;}
    .now_movie .visual .swiper-wrapper .swiper-slide {padding:0px 0px 0 !important; background:rgba(0, 0, 0, 0.7); border-radius:16px; overflow: hidden;} 
    .ott .visual .swiper-wrapper .swiper-slide {padding:0px 0px 0px !important; border-radius:16px; overflow: hidden;}
    .ott .visual .swiper-wrapper .swiper-slide::after {display:none !important;}
</style>

<div class="wrap_inner">
    <strong class="badge">메인</strong>

    <div class="device_wrap">
        <div>
            <p class="header"><img src="./images/A/cinema/01.png"/></p>
            <ul>
                <li class="movie on">
                    <img src="./images/A/cinema/02_title.png" alt="" style="width:123px;">
                    <div class="video video_04">
                        <div>
                            <img class="num on" src="./images/A/cinema/02_num.png" alt="">
                            <img class="txt on" src="./images/A/cinema/02_txt.png" alt="">
                            <img class="icon on" src="./images/A/cinema/02_icon.png" alt="">
                        </div>
                        <video autoplay muted playsinline loop>
                            <source src="../video.mp4" type="video/mp4">
                        </video>
                    </div>
                </li>
                <li class="main_visual" style="padding-top:14px !important;">
                    <div class="visual swiper-container show">
                        <ul class="swiper-wrapper">
                            <li class="swiper-slide"><img class="on" src="./images/A/cinema/03/03-1.png" alt=""></li>
                            <li class="swiper-slide"><img class="on" src="./images/A/cinema/03/03-2.png" alt=""></li>
                            <li class="swiper-slide"><img class="on" src="./images/A/cinema/03/03-3.png" alt=""></li>
                            <li class="swiper-slide"><img class="on" src="./images/A/cinema/03/03-4.png" alt=""></li>
                        </ul>
                    </div>
                </li>
                <li>
                    <img src="./images/A/cinema/04/04_title.png" alt="" style="width:88px">
                    <!-- swiper -->
                    <div class="now_movie" style="padding-top:14px !important; margin-top:0 !important;">
                        <div class="visual swiper-container">
                            <ul class="swiper-wrapper">
                                <li class="swiper-slide"><img src="./images/A/cinema/04/04-1.png"/></li>
                                <li class="swiper-slide"><img src="./images/A/cinema/04/04-2.png"/></li>
                                <li class="swiper-slide"><img src="./images/A/cinema/04/04-3.png"/></li>
                            </ul>
                        </div>
                    </div>
                    <!-- //swiper -->
                    <img src="./images/A/cinema/04/04-bottom.png"/>
                </li>
                <li><img src="./images/A/cinema/05.png"/></li>
                <li>
                    <img src="./images/A/cinema/06.png" alt="">
                </li>
                <li><img src="./images/A/cinema/07.png" alt=""></li>
                <li class="show"><img src="./images/A/cinema/08.png" alt=""></li>
                <li>
                    <img src="./images/A/cinema/09.png" alt="">
                </li>
                <li>
                    <img src="./images/A/cinema/10.png" alt="">
                </li>
                <li><img src="./images/A/cinema/11.png"/></li>
                <li>
                    <img src="./images/A/cinema/12/12_title.png" alt="" style="width:182px">
                    <!-- swiper -->
                    <div class="ott" style="padding-top:14px !important; margin-top:0 !important;">
                        <div class="visual swiper-container show">
                            <ul class="swiper-wrapper">
                                <li class="swiper-slide"><img src="./images/A/cinema/12/12-1.png"/></li>
                                <li class="swiper-slide"><img src="./images/A/cinema/12/12-2.png"/></li>
                                <li class="swiper-slide"><img src="./images/A/cinema/12/12-3.png"/></li>
                            </ul>
                        </div>
                    </div>
                    <!-- //swiper -->
                </li>
                <li><img src="./images/A/cinema/13.png"/></li>
            </ul>
        </div>
        <p class="bottom" style="z-index:2;"><img src="./images/screen/TabBar.png"/></p>
    </div>
    <div class="txt_wrap_s">
        <p class="active">
            <strong>N차 관람</strong>
            <span>나의 관람 내역에 따라 재관람 확인 및 리마인드</span>
        </p>
        <p>
            <strong>실관람객 추천</strong>
            <span>최근 화재가 되는 영화나 몰랐던 좋은 영화를 추천</span>
        </p>
        <p>
            <strong>OTT에서</strong>
            <span>상영이 끝나도 영화를 볼 수 있는 채널을 추천</span>
        </p>
    </div>
</div>

<script>
    $(function(){
        $('.video_04 > div').click(function(){
            $('.video_04 > div').css('background-image', 'url("")');
        })
        var li_offset = [];

        setTimeout(()=>{
            $('.txt_wrap_s, .device_wrap').addClass('active');
            $('.device_wrap > div > ul > li').each(function(index){
                li_offset.push($(this).find('img').offset().top);
            });
        },500);
        setTimeout(()=>{
            $('.device_wrap.active > div > ul').addClass('show');
        },1000)

        $('.device_wrap > div').scroll(function(){
            if(($(this).scrollTop() + 200) > li_offset[5] || $(this).scrollTop() == 0){
                $('.device_wrap > div > ul  > li').removeClass('on');
                $('.show img').eq(0).addClass('on')
                console.log($('.show img'))
                // $('.device_wrap > div > ul > li').eq(0).addClass('on');

                $('.txt_wrap_s p.active').removeClass('active');

                $('.txt_wrap_s p').eq(0).addClass('active');
            }

            if(($(this).scrollTop() + 200) > li_offset[4]){
                $('.device_wrap > div > ul  >li').removeClass('on');
                $('.show img').eq(16).addClass('on')
                // $('.device_wrap > div > ul  >li').eq(6).addClass('on');

                $('.txt_wrap_s p.active').removeClass('active');

                $('.txt_wrap_s p').eq(1).addClass('active');
            }

            if(($(this).scrollTop() + 150) > li_offset[8]){
                $('.device_wrap > div > ul > li').removeClass('on');
                $('.show img').eq(21).addClass('on')
                $('.show img').eq(22).addClass('on')
                $('.show img').eq(23).addClass('on')
                // $('.device_wrap > div > ul  > li').eq(10).addClass('on');

                $('.txt_wrap_s p.active').removeClass('active');

                $('.txt_wrap_s p').eq(2).addClass('active');
            }

        });
    });
</script>

<style>
    .device_wrap .header {z-index:3 !important;}
    .wrap_inner {align-items:center;}
    .badge {position:absolute; top:0; left:0;}
    .txt_wrap_s {padding-top:120px; opacity:0; transition:all 0.5s;}
    .txt_wrap_s.active {opacity:1;}
    .txt_wrap_s p {display:flex; flex-wrap:wrap; opacity:0; transform:translateY(600px); transition:all 0.5s 0.5s; transition-property:opacity, transform;}
    .txt_wrap_s.active p {opacity:1; transform:translateY(0);}

    .txt_wrap_s p, .txt_wrap_s p strong {margin-right:24px; font-weight:normal; flex:1;}
    .txt_wrap_s p.active, .txt_wrap_s p.active strong {font-weight:700 !important;}
    .txt_wrap_s p strong {width:152px;}
    .txt_wrap_s p span {width:523px;}

    .device_wrap {margin-left:280px;}
    .device_wrap > div > ul {background: linear-gradient(rgba(255,255,255,1) 0%, rgba(243,243,243,1) 1%, rgba(244,244,244,1) 100%); overflow-x:hidden;}
    .device_wrap ul li {padding:40px 15px 0;}
    .device_wrap ul li img + div {margin-top:16px;}
    .device_wrap ul li img + div + img {margin-top:8px;}

    .device_wrap.active ul li:after {background-color:rgba(0,0,0,0.7); opacity:0; content:''; position:absolute; top:0; right:0; bottom:0; left:0; z-index:0; transition:1s ease-out;}
    .device_wrap.active ul.show li:after {opacity:1;}

    /* .device_wrap.active ul li:after {background-color:rgba(0,0,0,0.7); opacity:1; content:''; position:absolute; top:0; right:0; bottom:0; left:0; z-index:0; display:block
    ; transition:all 1s;}
    .device_wrap.active ul li.on:after {opacity:0;} */

    .device_wrap img {width:100%;}

    .device_wrap a {width:40px; height:40px; font-size:0; background-color:rgba(0,0,0,0.2); border:2px dashed #000; border-radius:50%; position:absolute; top:-10px; right:10px; opacity:0; transition:all 0.4s 1.5s;}
    .device_wrap.active a {opacity:1;}

    .device_wrap li.movie img {transition:all 0.35s;}

    /* ul li.show img {position:relative; z-index:0; transition:all 0.4s 1s; opacity:0.5;}
    ul li.show img.on {z-index:1; opacity:1;} */

    .show img {position:relative; z-index:0; transition:all 0.4s 1s; opacity:0.5;}
    img.on {z-index:1; opacity:1;}
    .video {position:relative; border-radius:16px; overflow:hidden;}
    .video > img {position:relative; z-index:2;}
    .video_04 video {width:357px; height:377px; object-fit:fill; border-radius:16px; position:absolute; top:0; z-index:1;}
    .video_04 > div {width:357px; height:377px; position:relative; z-index:2; background-image:url('./images/A/cinema/02_img.png'); background-size:100%; background-repeat:no-repeat;}
    .video_04 > div .num, .video_04 > div .icon, .video_04 > div .txt{position:absolute; z-index:2;}
    .video_04 > div .num {width:60px; top:20px; left:20px;}
    .video_04 > div .icon {width:36px; right:20px; bottom:20px;}
    .video_04 > div .txt {width:200px; bottom:20px; left:20px;}
</style>